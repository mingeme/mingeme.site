---
import dayjs from 'dayjs';
import utc from 'dayjs/plugin/utc';
import timezone from 'dayjs/plugin/timezone';
import localizedFormat from 'dayjs/plugin/localizedFormat';
import 'dayjs/locale/zh-cn';

dayjs.extend(utc);
dayjs.extend(timezone);
dayjs.extend(localizedFormat);
dayjs.locale('zh-cn');

const { url, frontmatter } = Astro.props;
const formattedDate = dayjs(frontmatter.pubDate).tz('Asia/Shanghai').format('YYYY年M月D日');
const tags = frontmatter.tags ?? [];
const description = frontmatter.description ?? frontmatter.subtitle ?? '';
---

<a
  href={`/posts/${url}`}
  class="block rounded-xl border border-transparent bg-white/90 p-6 transition duration-300 hover:-translate-y-1 hover:border-primary/40 hover:bg-primary/5"
>
  <div class="flex flex-col gap-3">
    <h3 class="text-xl font-semibold text-text-light transition-colors">
      {frontmatter.title}
    </h3>
    {description && <p class="text-sm leading-relaxed text-text-light/70">{description}</p>}
    {
      tags.length > 0 && (
        <div class="flex flex-wrap gap-2">
          {tags.map((tag: string) => (
            <span class="rounded-full border border-primary/20 bg-primary/5 px-3 py-1 text-xs font-medium text-primary">
              #{tag}
            </span>
          ))}
        </div>
      )
    }
    <p class="text-sm text-text-light/50">{formattedDate}</p>
  </div>
</a>
